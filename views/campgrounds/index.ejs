<% layout('/layout/boilerPlate') %>

<div id="cluster-map"></div>
    
    <div class="container">
        <div class="h1 mt-4 pb-2 mb-4 text-danger border-bottom border-danger">
            All CampGrounds!
        </div>
        <a class="btn btn-primary mb-3 d-flex shadow justify-content-center" href="/campgrounds/new">Add New Campground</a>
        <!-- <ul> -->
            <% for(let campground of campgrounds) { %>
                <div class="card mb-5">
                    <div class="row p-2">
                        <div class="col-md-4 card-body">
                            <% if(campground.images.length) { %>
                                <img class="card-img-top" alt="" src="<%= campground.images[0].url %>">
                                <% } else { %>
                                    <img class="img-fluid" alt=""
                                        src="https://res.cloudinary.com/dz1r7lx8b/image/upload/v1688035118/YelpCamp/uinnxzs67ucw5tsmlgx2.jpg">
                                    <% } %>
                        </div>
                        <div class="col-md-8 card-body">
                            <h4 class="card-title"><%= campground.title %></h4>
                            <p class="card-text"><%= campground.description %></p>
                            <p class="card-text">
                                <small class="text-muted"><%= campground.location %></small>
                            </p>
                            <a class="btn btn-primary" href="/campgrounds/<%= campground._id %>">View <%= campground.title %></a>
                        </div>
                    </div>
                </div>
                <% } %>
        <!-- </ul> -->
    </div>


    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
    </script>

    <script src="/javascripts/clusterMap.js"></script>